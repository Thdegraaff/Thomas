  <head>
    <meta charset="utf-8">
    <title>A lines map of building height in Amsterdam | Thomas de Graaff</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Carlito|Source+Code+Pro|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/foundation.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/highlight.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/font-awesome.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/academicons.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/finite.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/kube.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/thomas.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/styles/zenburn.css">
  </head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="thomasdegraaff.nl/"  style="color: #c09f80">Thomas de Graaff</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      



	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="thomasdegraaff.nl/"  style="color: #c09f80;">Thomas de Graaff</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="thomasdegraaff.nl/thomas/">Blog</a></li>
		  
		  <li><a href="thomasdegraaff.nl/publications/">Publications</a></li>
		  
		  <li><a href="thomasdegraaff.nl/seminars/">Seminars</a></li>
		  
		  <li><a href="thomasdegraaff.nl/teaching/">Teaching</a></li>
		  
		  <li><a href="thomasdegraaff.nl/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		



	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      

<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>A lines map of building height in Amsterdam</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'><h3 style='padding-top: 0.8ex;'><a style ="color: #f7e1d7;" href="thomasdegraaff.nl/thomas/">Thomas de Graaff</a></h3>
      <div class="post-metadata">
  <span class="post-date">
    <time datetime="2017-05-02 00:00:00 &#43;0000 UTC" itemprop="datePublished">2 May 2017</time>
  </span>
  
  
  
  <span class="post-tags">
    <p><i class="fa fa-tags"></i>
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/r">R</a>,
     
    
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/reproducability">Reproducability</a>
    
  </span>
  
  
</div>

    </div>
<div class="unit-60">

  <h2 id="introduction">Introduction</h2>
<p>I just came across this wonderfull post on <a href="https://www.r-bloggers.com">https://www.r-bloggers.com</a> <a href="http://spatial.ly/2017/04/population-lines-how-and-why-i-created-it/">http://spatial.ly/2017/04/population-lines-how-and-why-i-created-it/</a> called Population Lines: How and Why I Created it) by James Cheshire. It allows for wonderfull (and artistic) maps constructed by only varations in height of horizontal lines. One might wonder how useful they are, but they sure are beautiful as one can see below in the population lines map of Europe.</p>
<figure>
    <img src="thomasdegraaff.nl/img/europe.png"/> <figcaption>
            <h4>Population lines map of Europe (source http://blog.revolutionanalytics.com/2017/04/where-europe-lives.html).</h4>
        </figcaption>
</figure>

<p>I decided to redo this but then for Amsterdam and then not using population data but instead data for the height of the buildings (the data is used by Maria Teresa Borzacchiello, Peter Nijkamp and Eric Koomen in an article in Environment &amp; Planning B called Accessibility and urban development: a grid-based comparative statistical analysis of Dutch cities in 2010). The link to the data can be found in this article. The code for the large map in the header of this post is surprisingly simple and concise and explained below.</p>
<p>The code
First, I read in the csv dataset and rename the grid numbers as articifial latitute and longitute coordinates.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">height <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">./buildingheight/amsterdam.csv&#39;</span>, header <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
<span style="color:#a6e22e">colnames</span>(height) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">ncol</span>(height))
height<span style="color:#f92672">$</span>lat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seq</span>(<span style="color:#a6e22e">nrow</span>(height),<span style="color:#ae81ff">1</span>)
height <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">gather</span>(height, lat, value)
height<span style="color:#f92672">$</span>lon <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(height[,<span style="color:#ae81ff">2</span>])
height <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">subset</span>(height, select <span style="color:#f92672">=</span> <span style="color:#ae81ff">-2</span> )
height <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(height, value <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) 
</code></pre></div><p>Then it is simply a matter of invoking the ggplot package where we group observations by each latitude and apply a line aesthetic.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(ggplot2)
height <span style="color:#f92672">%&gt;%</span> 
    <span style="color:#a6e22e">mutate</span>(lat <span style="color:#f92672">=</span> lat<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>,
    lon <span style="color:#f92672">=</span> lon<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">group_by</span>(lat<span style="color:#f92672">=</span><span style="color:#a6e22e">round</span>(lat, <span style="color:#ae81ff">1</span>), lon<span style="color:#f92672">=</span><span style="color:#a6e22e">round</span>(lon, <span style="color:#ae81ff">1</span>)) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">summarize</span>(value <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(value, na.rm<span style="color:#f92672">=</span><span style="color:#66d9ef">TRUE</span>))  <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">ungroup</span>() <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">complete</span>(lat, lon) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(lon, lat <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">*</span>(value<span style="color:#f92672">/</span><span style="color:#a6e22e">max</span>(value, na.rm<span style="color:#f92672">=</span><span style="color:#66d9ef">TRUE</span>)))) <span style="color:#f92672">+</span>
    <span style="color:#a6e22e">geom_line</span>(size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.4</span>, alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">0.8</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">#5A3E37&#39;</span>, <span style="color:#a6e22e">aes</span>(group<span style="color:#f92672">=</span>lat), na.rm<span style="color:#f92672">=</span><span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">+</span>
    ggthemes<span style="color:#f92672">::</span><span style="color:#a6e22e">theme_map</span>() <span style="color:#f92672">+</span>
    <span style="color:#a6e22e">coord_equal</span>(<span style="color:#ae81ff">0.9</span>)

<span style="color:#a6e22e">ggsave</span>(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Amsterdam.png&#39;</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</code></pre></div><p>Which has the following wonderful result:</p>
<figure>
    <img src="thomasdegraaff.nl/img/Amsterdam.png"/> <figcaption>
            <h4>Height of buildings in Amsterdam</h4>
        </figcaption>
</figure>



      <meta itemprop="wordCount" content="292">
      <meta itemprop="datePublished" content="2017-05-02">
      <meta itemprop="url" content="thomasdegraaff.nl/thomas/a-lines-map-of-building-height-in-amsterdam/">

<div class='sans' style="background: #d7cec7; padding: 2em;">
<div style="padding-bottom: 1em" >
<div class="share-box">
  <ul class="share">
    <li>
      <a class="facebook" href="http://www.facebook.com/sharer.php?u=thomasdegraaff.nl%2fthomas%2fa-lines-map-of-building-height-in-amsterdam%2f" target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter" href="https://twitter.com/intent/tweet?text=A%20lines%20map%20of%20building%20height%20in%20Amsterdam. thomasdegraaff.nl%2fthomas%2fa-lines-map-of-building-height-in-amsterdam%2f from @thdegraaff" target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=thomasdegraaff.nl%2fthomas%2fa-lines-map-of-building-height-in-amsterdam%2f&amp;title=A%20lines%20map%20of%20building%20height%20in%20Amsterdam" target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="email" href="mailto:?subject=A%20lines%20map%20of%20building%20height%20in%20Amsterdam&amp;body=thomasdegraaff.nl%2fthomas%2fa-lines-map-of-building-height-in-amsterdam%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


</div>

    <ul class="pagination" role="navigation" aria-label="Pagination">
      
      <li class="arrow" aria-disabled="true"><a href="thomasdegraaff.nl/thomas/a-heatmap-of-the-robustness-of-determinants-of-european-city-growth/">&laquo; <em>Previous<span class="show-for-sr"> page</span></em>: A Heatmap of the Robustness of Determinants of European City growth</a></li>
      
      
      <li class="arrow" aria-disabled="true"><a href="thomasdegraaff.nl/thomas/choosing-statistical-software-package-for-education-in-the-social-sciences/"><em>Next<span class="show-for-sr"> page</span></em>: Choosing statistical software packages for education in the social sciences&nbsp;&raquo;</a></li>
      
    </ul>
    <a href="thomasdegraaff.nl/hyndsight/">All posts by date</a>
</div>

<span style='font-family: Carlito'>
 <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
              return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'thomasdegraaff-nl';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</span>

  </div>
  </div></div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <h3>About me</h3>
      <figure class='image-left'>
      <a href="thomasdegraaff.nl/" style="border-bottom: none;">
      	<img src="thomasdegraaff.nl/img/Thomas.jpg" alt="Portrait of the author" height="120" width="120" class='avatar'>
      </a>
  </figure>
  <p>
      I am an assistant professor employed at the <a href=http://www.spatialeconomics.nl/> department of spatial economics </a> at the <a href=http://www.vu.nl/> Vrije Universiteit Amsterdam </a>. This is my personal website and nothing in here is endorsed by the Vrije Universiteit Amsterdam.
    </div>
    <div class="column small-12 medium-4">
      
      <h3 id="contact">Contact</h3>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://sbe.vu.nl/nl/afdelingen-en-instituten/spatial-economics/index.aspx">Department of Spatial Economics, School of Business and Economics, Vrije Universiteit Amsterdam, The Netherlands</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:t.de.graaff@vu.nl">t.de.graaff@vu.nl</a></li>
	
	<li><i class="fa-li fa fa-linkedin-square" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.linkedin.com/in/thomas-de-graaff-1661636/">Thomas de Graaff</a> on linkedin</li>
	
	<li><i class="fa-li fa fa-github" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/Thdegraaff/">Thdegraaff</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=q46f0_YAAAAJ">Google Scholar</a></li>
	
	<li><i class="fa-li ai ai-researchgate" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.researchgate.net/profile/Thomas_Graaff">Research gate</a></li>
	
      </ul>
    </div>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    
    <div class="column small-12 medium-4">
      <h3>Search</h3>

      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value=http://www.thomasdegraaff.nl/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
        <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
            and <a href="http://spacemacs.org">Spacemacs</a>.
            &copy; <a href="https://thomasdegraaff.nl">Thomas&nbsp;de&nbsp;Graaff</a> 2014&ndash;2020. Original design by <a href="https://robjhyndman.com/">Rob J Hyndman</a> based on <a href="https://kieranhealy.org/">Kieran Healy</a>'s design.
    </section>
    </footer>
    </div>

    <script src="thomasdegraaff.nl/js/jquery.js"></script>
    <script src="thomasdegraaff.nl/js/what-input.js"></script>
    <script src="thomasdegraaff.nl/js/foundation.min.js"></script>
    <script src="thomasdegraaff.nl/js/finite.js"></script>

    
    <script src="thomasdegraaff.nl/js/highlight.pack.js"></script>
    
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>

    <script>
     hljs.configure({languages: []});
     hljs.initHighlightingOnLoad();
    </script>

    
    


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-110560967-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

 </body>
</html>
