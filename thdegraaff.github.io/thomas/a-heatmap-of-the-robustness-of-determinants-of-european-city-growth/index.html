  <head>
    <meta charset="utf-8">
    <title>A Heatmap of the Robustness of Determinants of European City growth | Thomas de Graaff</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Carlito|Source+Code+Pro|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/foundation.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/highlight.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/font-awesome.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/academicons.min.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/finite.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/kube.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/thomas.css">
    <link rel="stylesheet" href="thomasdegraaff.nl/css/styles/zenburn.css">
  </head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="thomasdegraaff.nl/"  style="color: #c09f80">Thomas de Graaff</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      



	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="thomasdegraaff.nl/"  style="color: #c09f80;">Thomas de Graaff</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="thomasdegraaff.nl/thomas/">Blog</a></li>
		  
		  <li><a href="thomasdegraaff.nl/publications/">Publications</a></li>
		  
		  <li><a href="thomasdegraaff.nl/seminars/">Seminars</a></li>
		  
		  <li><a href="thomasdegraaff.nl/teaching/">Teaching</a></li>
		  
		  <li><a href="thomasdegraaff.nl/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		



	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      

<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>A Heatmap of the Robustness of Determinants of European City growth</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'><h3 style='padding-top: 0.8ex;'><a style ="color: #f7e1d7;" href="thomasdegraaff.nl/thomas/">Thomas de Graaff</a></h3>
      <div class="post-metadata">
  <span class="post-date">
    <time datetime="2017-04-21 00:00:00 &#43;0000 UTC" itemprop="datePublished">21 April 2017</time>
  </span>
  
  
  
  <span class="post-tags">
    <p><i class="fa fa-tags"></i>
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/research">Research</a>,
     
    
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/reproducability">Reproducability</a>, 
    
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/heterogeneity">Heterogeneity</a>, 
    
    
    <a class="post-tag" href="thomasdegraaff.nl/categories/r">R</a>
    
  </span>
  
  
</div>

    </div>
<div class="unit-60">

  <h2 id="introduction">Introduction</h2>
<p>Understanding what makes a city tick (e.g., the determinants that makes cities succesful in employment of economic growth) is vital for both policy makers and (regional) economists. Indeed, local policy makers usually want to know what they can contribute to the performance of their city or region. If policy makers can at all influence the performance, then most likely instruments vary between cities and regions. What is good for one city is not necessarily good for another. To analyse this, I ran many regressions of combinations of determinants and analyse their robustness (e.g., sign changes, changes in significance level and coefficients). The research is commissioned by the PBL Netherlands Environmental Assessment Agency.</p>
<h2 id="the-problem">The problem</h2>
<p>One way of looking at city or regional performance is to make use of growth models. Typically, an empirical growth model comes in the following shape:</p>
<p>$$
\ln(\frac{y_t}{y_0})=\ln(y_0)+\mathbf{X}\beta+\epsilon,
$$</p>
<p>where $y_t$ denotes a regional or city performance measure (gdp or employment), so $\ln(\frac{y_t}{y_0})$ denotes the growth rate of $y$ between $t$ and $0$. On the right hand side, typically one controls for the initial state of $y$ at time $0$ and for a whole bunch of other variables $\mathbf{X}$. And it is exactly these variables we are interested in:</p>
<blockquote>
<p>Which variables, if any, have a systematic and robust impact on the growth rate of $y$?</p>
</blockquote>
<p>So, we estimate the model above multiple times where each time $\mathbf{X}$ is formed by a subset of all determinants (in our case we use for each regression 4 variables out of around 70). This yield a database of many regression results (actually two databased: one with the coefficients and one with the t-values). One way of assessing the robustness of a particular indicator is to look at how many times that indicator is signicant and display the percentage in a heatmap</p>
<h2 id="creating-a-heat-map-of-the-regression-results">Creating a heat map of the regression results</h2>
<p>After I have run all possible regressions (and there are many given the formula $\frac{71!}{4!(71-4)!}$, I can perform an ex-post analysis on the results. For my purpose, I have looked at city gdp for all sectors combined, and separately for 7 sectors and have created a dataset that consists of how many times (in percentages) a variable was significant in the regression above. This had led to the table below with sectors as variables and each determinant as an observation (alas, sector names and variables are in Dutch).</p>
<pre><code>&gt; data
# A tibble: 71 × 8
                      Variable    Totaal     Landbouw Constructie         fbs   Industrie
                         &lt;chr&gt;     &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
1                        Banen 0.9999791 0.6722262812 0.999937376 0.846926208 1.000000000
2            Levensverwachting 1.0000000 0.9523640539 0.999519883 0.816386598 0.845819852
3          Kwaliteit onderwijs 0.9756184 0.0577601503 0.694269909 0.998893644 0.579000104
4                    Recreatie 0.5286922 0.0000000000 0.999874752 0.595031834 0.593695856
5                 Natuurrampen 1.0000000 0.0002087465 0.082580106 0.985867863 0.006137146
6            Clustering chemie 0.8412901 0.0003131197 0.027157917 0.291034339 0.034631041
7       Specialisatie landbouw 0.9799395 0.0001878718 0.225634067 1.000000000 0.045360610
8  Specialisatie electriciteit 0.9998956 0.0001669972 0.005531782 0.004905542 0.999645131
9               Bereikbaarheid 0.9505062 0.2850224402 0.759482309 0.999979125 0.935392965
10                     Cultuur 0.9457468 0.0352364054 1.000000000 0.973363949 0.828368646
# ... with 61 more rows, and 2 more variables: `Niet markt diensten` &lt;dbl&gt;, wrtdchc &lt;dbl&gt;
</code></pre>
<p>To make a heat map I first have to create a tidy dataset using the gather function:</p>
<pre><code>&gt; data &lt;- gather(data, sector, waarde, -Variable)
&gt; data
# A tibble: 497 × 3
                      Variable sector    waarde
                         &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;
1                        Banen Totaal 0.9999791
2            Levensverwachting Totaal 1.0000000
3          Kwaliteit onderwijs Totaal 0.9756184
4                    Recreatie Totaal 0.5286922
5                 Natuurrampen Totaal 1.0000000
6            Clustering chemie Totaal 0.8412901
7       Specialisatie landbouw Totaal 0.9799395
8  Specialisatie electriciteit Totaal 0.9998956
9               Bereikbaarheid Totaal 0.9505062
10                     Cultuur Totaal 0.9457468
# ... with 487 more rows
</code></pre>
<p>To be able to sort the heat map based on average values, I create a new variable with the average of all the percentages, order it in descending order and refactor the sector names, so that it remains in the order I want in the heatmap:</p>
<pre><code>data &lt;- data %&gt;%
  group_by(Variable) %&gt;%
  mutate(gemiddelde  = mean(waarde), 
    sector &lt;- as.character(sector),
    sector &lt;- factor(sector, 
              levels=c(&quot;Totaal&quot;, &quot;Landbouw&quot;, &quot;Constructie&quot;, 
                       &quot;fbs&quot;, &quot;Industrie&quot;, &quot;Niet markt diensten&quot;,
                       &quot;wrtdchc&quot;))) %&gt;%
  arrange(desc(gemiddelde))
</code></pre>
<p>The data now looks like:</p>
<pre><code>&gt; data
# A tibble: 497 × 6
            Variable              sector    waarde gemiddelde `sector &lt;- as.character(sector)`
               &lt;chr&gt;              &lt;fctr&gt;     &lt;dbl&gt;      &lt;dbl&gt;                            &lt;chr&gt;
1     Waarde in 1991              Totaal 1.0000000  1.0000000                           Totaal
2     Waarde in 1991            Landbouw 1.0000000  1.0000000                         Landbouw
3     Waarde in 1991         Constructie 1.0000000  1.0000000                      Constructie
4     Waarde in 1991                 fbs 1.0000000  1.0000000                              fbs
5     Waarde in 1991           Industrie 1.0000000  1.0000000                        Industrie
6     Waarde in 1991 Niet markt diensten 1.0000000  1.0000000              Niet markt diensten
7     Waarde in 1991             wrtdchc 1.0000000  1.0000000                          wrtdchc
8  Levensverwachting              Totaal 1.0000000  0.9134179                           Totaal
9  Levensverwachting            Landbouw 0.9523641  0.9134179                         Landbouw
10 Levensverwachting         Constructie 0.9995199  0.9134179                      Constructie
# ... with 487 more rows, and 1 more variables: `sector &lt;- factor(sector, levels =
#   c(&quot;...` &lt;fctr&gt;
</code></pre>
<p>With the <code>geom_tile</code> aesthetic from <code>ggplot2</code> I can now create the heat map I want as follows (note that I used the package <code>RColorBrewer</code> for my colour palette):</p>
<pre><code>  # Note that for ggplot I still have to reorder the variable I want based on the gemiddelde
  p &lt;- ggplot(data,aes(x = sector, y = reorder(Variable,gemiddelde))) +  
     geom_tile(aes(fill = waarde),colour = &quot;white&quot;) + 
     scale_fill_distiller(&quot;Percentage\nsignificant&quot;, 
                          palette = &quot;Spectral&quot;) +
     theme_grey(base_size = 9) + 
     labs(x = &quot;&quot;,y = &quot;&quot;) + 
     scale_x_discrete(expand = c(0, 0)) +
       scale_y_discrete(expand = c(0, 0)) + 
       theme(axis.ticks = element_blank(), 
        axis.text.x = element_text(size = 9 *0.8, 
        angle = 330, hjust = 0, colour = &quot;grey50&quot;))
</code></pre>
<p>Which finally produces the following plot.</p>
<figure>
    <img src="thomasdegraaff.nl/img/heatmap_gva.png"/> <figcaption>
            <h4>Heatmap of percentage significance of indicators on European city growth.</h4>
        </figcaption>
</figure>

<h2 id="implications">Implications</h2>
<p>When looking at the plot above, it is remarkable that most of the variables are not significant at all times. Worse, most of them are not even significant 75% or even 50% of all cases. This casts great doubt upon the robustness and even validity of most of the determinants oftentimes used in these type of analyses. On the other hand, some of the determinants of city growth may only be important in combination with other determinants. So the next step, would be to look at the impact conditional on other determinants.</p>


      <meta itemprop="wordCount" content="1002">
      <meta itemprop="datePublished" content="2017-04-21">
      <meta itemprop="url" content="thomasdegraaff.nl/thomas/a-heatmap-of-the-robustness-of-determinants-of-european-city-growth/">

<div class='sans' style="background: #d7cec7; padding: 2em;">
<div style="padding-bottom: 1em" >
<div class="share-box">
  <ul class="share">
    <li>
      <a class="facebook" href="http://www.facebook.com/sharer.php?u=thomasdegraaff.nl%2fthomas%2fa-heatmap-of-the-robustness-of-determinants-of-european-city-growth%2f" target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter" href="https://twitter.com/intent/tweet?text=A%20Heatmap%20of%20the%20Robustness%20of%20Determinants%20of%20European%20City%20growth. thomasdegraaff.nl%2fthomas%2fa-heatmap-of-the-robustness-of-determinants-of-european-city-growth%2f from @thdegraaff" target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=thomasdegraaff.nl%2fthomas%2fa-heatmap-of-the-robustness-of-determinants-of-european-city-growth%2f&amp;title=A%20Heatmap%20of%20the%20Robustness%20of%20Determinants%20of%20European%20City%20growth" target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="email" href="mailto:?subject=A%20Heatmap%20of%20the%20Robustness%20of%20Determinants%20of%20European%20City%20growth&amp;body=thomasdegraaff.nl%2fthomas%2fa-heatmap-of-the-robustness-of-determinants-of-european-city-growth%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


</div>

    <ul class="pagination" role="navigation" aria-label="Pagination">
      
      <li class="arrow" aria-disabled="true"><a href="thomasdegraaff.nl/thomas/2016-09-12-socialinteractionandcrime/">&laquo; <em>Previous<span class="show-for-sr"> page</span></em>: Social Interaction and Crime</a></li>
      
      
      <li class="arrow" aria-disabled="true"><a href="thomasdegraaff.nl/thomas/a-lines-map-of-building-height-in-amsterdam/"><em>Next<span class="show-for-sr"> page</span></em>: A lines map of building height in Amsterdam&nbsp;&raquo;</a></li>
      
    </ul>
    <a href="thomasdegraaff.nl/hyndsight/">All posts by date</a>
</div>

<span style='font-family: Carlito'>
 <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
              return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'thomasdegraaff-nl';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</span>

  </div>
  </div></div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <h3>About me</h3>
      <figure class='image-left'>
      <a href="thomasdegraaff.nl/" style="border-bottom: none;">
      	<img src="thomasdegraaff.nl/img/Thomas.jpg" alt="Portrait of the author" height="120" width="120" class='avatar'>
      </a>
  </figure>
  <p>
      I am an assistant professor employed at the <a href=http://www.spatialeconomics.nl/> department of spatial economics </a> at the <a href=http://www.vu.nl/> Vrije Universiteit Amsterdam </a>. This is my personal website and nothing in here is endorsed by the Vrije Universiteit Amsterdam.
    </div>
    <div class="column small-12 medium-4">
      
      <h3 id="contact">Contact</h3>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://sbe.vu.nl/nl/afdelingen-en-instituten/spatial-economics/index.aspx">Department of Spatial Economics, School of Business and Economics, Vrije Universiteit Amsterdam, The Netherlands</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:t.de.graaff@vu.nl">t.de.graaff@vu.nl</a></li>
	
	<li><i class="fa-li fa fa-linkedin-square" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.linkedin.com/in/thomas-de-graaff-1661636/">Thomas de Graaff</a> on linkedin</li>
	
	<li><i class="fa-li fa fa-github" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/Thdegraaff/">Thdegraaff</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=q46f0_YAAAAJ">Google Scholar</a></li>
	
	<li><i class="fa-li ai ai-researchgate" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.researchgate.net/profile/Thomas_Graaff">Research gate</a></li>
	
      </ul>
    </div>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    
    <div class="column small-12 medium-4">
      <h3>Search</h3>

      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value=http://www.thomasdegraaff.nl/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
        <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
            and <a href="http://spacemacs.org">Spacemacs</a>.
            &copy; <a href="https://thomasdegraaff.nl">Thomas&nbsp;de&nbsp;Graaff</a> 2014&ndash;2020. Original design by <a href="https://robjhyndman.com/">Rob J Hyndman</a> based on <a href="https://kieranhealy.org/">Kieran Healy</a>'s design.
    </section>
    </footer>
    </div>

    <script src="thomasdegraaff.nl/js/jquery.js"></script>
    <script src="thomasdegraaff.nl/js/what-input.js"></script>
    <script src="thomasdegraaff.nl/js/foundation.min.js"></script>
    <script src="thomasdegraaff.nl/js/finite.js"></script>

    
    <script src="thomasdegraaff.nl/js/highlight.pack.js"></script>
    
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>

    <script>
     hljs.configure({languages: []});
     hljs.initHighlightingOnLoad();
    </script>

    
    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
    </script>
    


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-110560967-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

 </body>
</html>
